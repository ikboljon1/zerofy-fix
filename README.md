
# Zerofy - Система для управления продажами

## Настройка и запуск

### Фронтенд

1. Установите зависимости:
```
npm install
```

2. Запустите приложение:
```
npm run dev
```

### Бэкенд для отправки email и работы с базой данных (локальная разработка)

1. Создайте отдельную папку для бэкенда:
```
mkdir zerofy-backend
cd zerofy-backend
```

2. Скопируйте файлы `server.js` и `package.json.backend` (переименуйте его в `package.json`)

3. Установите зависимости:
```
npm install
```

4. Запустите сервер:
```
npm run dev
```

## База данных

Система использует SQLite для хранения данных. База данных автоматически создается при первом запуске сервера в файле `database.sqlite`. В базе данных хранятся следующие данные:

1. **Пользователи (таблица users)**
   - Информация о зарегистрированных пользователях
   - Данные подписки и тарифа
   - Роль и статус пользователя

2. **Настройки Email (таблица email_settings)**
   - Настройки SMTP и POP3 для отправки и получения писем

3. **Токены для сброса пароля (таблица password_reset_tokens)**
   - Временные токены для процедуры сброса пароля

4. **История платежей (таблица payment_history)**
   - Записи о платежах пользователей
   - Информация о тарифе и периоде оплаты

5. **Данные магазинов (таблицы store_stats, orders, sales, products, analytics)**
   - Статистика магазинов
   - Заказы и их географическое распределение
   - Данные о продажах
   - Информация о товарах
   - Аналитические данные (штрафы, возвраты, удержания, реклама)

## Хранение данных API

Система получает данные от API Wildberries и сохраняет их в базе данных SQLite. В случае недоступности базы данных или ошибок, используется резервный механизм хранения данных в localStorage браузера. Это обеспечивает бесперебойную работу приложения как при наличии подключения к серверу, так и в автономном режиме.

Данные API хранятся в следующих таблицах:

1. **store_stats** - общая статистика магазина
2. **orders** - заказы и их географическое распределение
3. **sales** - данные о продажах
4. **products** - информация о товарах
5. **analytics** - детальные аналитические данные (штрафы, возвраты, удержания, реклама)

## Настройка SMTP

Для работы функции сброса пароля необходимо настроить SMTP-сервер в разделе настроек администратора.

## Тестовые учетные записи

- Администратор: admin / admin
- Пользователь: ivan@example.com / password
